---
title: "Taller Córdoba (blog_01)"
author: "Pedro J. Pérez"
date: "`r format(Sys.time(), '%d %B, %Y')`"
format: 
  html:
    theme: minty  #- https://quarto.org/docs/output-formats/html-themes.html
    #-https://quarto.org/docs/websites/website-blog.html#themes
    backgroundcolor: "#F1F3F4"
    toc: true
    toc-depth: 3
    toc-location: left
    smooth-scroll: true
    #self-contained: true  #- ya no la usa la nueva version de pandoc
    standalone: true  
    link-external-icon: false
    link-external-newwindow: true
    html-math-method: katex
    citations-hover: false
    footnotes-hover: false
    css: assets/styles.css
comments:
  hypothesis: 
    theme: clean
---

::: {.callout-note collapse="false" appearance="default" icon="false"}
## Contexto

-   Tutorial preparado para el taller "Mi primer blog con Quarto" celebrado en Córdoba (Spain), 23-25 de noviembre de 2022. El taller se celebró el jueves 24, 15:15-17:00.

-   El taller está pensado para realizar con [R](https://cran.r-project.org/). Se utilizará el IDE [RStudio](https://www.rstudio.com/) y [Quarto](https://quarto.org/), así que tendrán que estar instalados en tu ordenador

-   Se recomienda tener instaladas **versiones recientes** de los 3 programas

-   Este tutorial es sólo una parte del taller. El **taller completo** está [aquí]()
:::

# Setup

::: {.callout-important collapse="false" appearance="default" icon="false"}
## Instalación de R, RStudio y Quarto

-   Todos sabemos instalar R y Rstudio, si no fuese así, [aquí](https://perezp44.github.io/intro-ds-22-23-web/mas-recursos/01_instrucciones-instalacion.html) tienes un tutorial. Sólo tendrías que completar la primera parte del tutorial.

-   Instalación de **Quarto**: si tienes una versión de RStudio superior o igual a RStudio 2022.07.1, ya tienes una versión de Quarto instalada

-   Si no fuese así, [aquí](https://quarto.org/docs/get-started/) tienes los instaladores para los principales sistemas operativos.
:::

<br>

# Blog en 3 minutos

Una vez tenemos instalados los programas vamos a ver el **proceso de creación** y la **estructura de ficheros** de un blog con Quarto de forma rápida. Ya tendremos tiempo de mejorarlo o tunearlo!!

## Creación de un Rproject (para un blog)

-   Si en RStudio sigues la siguiente ruta de menús: `File > New Project > New Directory > Quarto Blog` se te creará una carpeta, un Rproject, con todo lo necesario para crear un blog.

-   El nombre que le he puesto a la carpeta/Rproject es `blog_prueba_00`

- También podría crear el Rproject desde la Terminal de RStudio (panel inferior-izquierda), tecleando lo siguiente:


```{bash, eval = FALSE}
quarto create-project blog_prueba_00 --type website:blog
```

-   Con el Rproject que acabamos de crear, podremos generar un blog, será un blog sencillito, vamos con lo mínimo, pero un blog.


-   Pero ... aún no veo el blog!! Sí, tienes razón, el blog lo crearemos despues de hacer un pequeño repaso a la estructura de carpetas y archivos del Rproject

<br>

## Estructura de ficheros del Rproject

-   El Rproject que acabamos de crear y que contiene nuestro blog tendrá esta estructura de archivos y carpetas:

::: {#fig-quarto-blog layout-ncol="3"}
```{r}
#| echo: false
#| fig.cap: "Estructura del Rproject"
name_of_plot <- "img_01.png"
rutita <- paste0("./imagenes/tt_01/", name_of_plot)
knitr::include_graphics(rutita)
```

```{r}
#| echo: false
#| fig.cap: "Carpeta de posts: cada post en una carpeta"
name_of_plot <- "img_02.png"
rutita <- paste0("./imagenes/tt_01/", name_of_plot)
knitr::include_graphics(rutita)
```

```{r}
#| echo: false
#| fig.cap: "Carpeta de UN post (Welcome post)"
name_of_plot <- "img_03.png"
rutita <- paste0("./imagenes/tt_01/", name_of_plot)
knitr::include_graphics(rutita)
```

Estructura de carpetas del Rproject que creará nuestro blog
:::

## Creación del blog

El Rproject que hemos creado tiene todo lo necesario para crear un blog para ello tenemos que:

-   Ir al cuadrante superior-izquierda de RStudio, pinchar en la pestaña `Build` y pinchar en `Render Website`. Se procesarán los archivos del Rproject y se creará el blog. Podremos verlo en el cuadrante inferior-izquierda de RStudio, concretamente en la pestaña `Viewer`. Se verá algo como esto:

::: {#fig-quarto-blog layout-ncol="1"}
```{r}
#| echo: false
#| fig.cap: "Al pinchar en `Render Website` se creará el blog"
name_of_plot <- "img_04.png"
rutita <- paste0("./imagenes/tt_01/", name_of_plot)
knitr::include_graphics(rutita)
```
Al pinchar en `Render Website` se creará el blog
:::


- Puedes ver [aquí](https://pjperez.quarto.pub/blog_prueba_00/) como quedaría el blog.

- También podríamos haber generado el blog usando la Consola o la terminal desde RStudio. En ambos casos hay que estar en el Rproject "blog_prueba_00"; es decir, "blog_prueba_00" es el working directory


  ```{r, eval = FALSE}
  #- desde la Consola
  install.packages("quarto")
  quarto::quarto_render("index.qmd")
  ```


  ```{bash, eval = FALSE}
  #- desde la Terminal
  quarto render
  ```

<br>


## Veamos otra vez la estructura de carpetas

-   Tras haber creado el blog, la estructura de carpeta de nuestro Rproject quedará como:

::: {#fig-quarto-blog layout-ncol="1"}
```{r}
#| echo: false
name_of_plot <- "img_05.png"
rutita <- paste0("./imagenes/tt_01/", name_of_plot)
knitr::include_graphics(rutita)
```
Estructura de carpetas del Rproject tras la creación del blog
:::

-   Si comparamos la estructura de carpetas antes y despúes de hacer `Render Website` vemos que **se han creado 2 carpetas**: `_freeze` y `_site`

-   La carpeta `_freeze` podemos dejarla para más adelante.

-   La carpeta `_site` es la que realmente contiene el blog. Si alojas el contenido de esa carpeta en un servidor web se verá el blog que hemos creado. Antes de alojarlo, si quieres verlo puedes pinchar en el fichero `./blog_prueba_00/_site/index.html`. 

- De esa forma podemos ver que la Home Page del blog es la lista de posts del blog. En el blog por defecto que hemos creado solo hay 2 post: uno de bienvenida y otro de.

- Como ves el blog es muy sencillo, el Home Page es el listado de posts y solo tiene una página mas: About.


- No vamos a comentarla pero abajo hay un pantallazo de la carpeta `_site`.
  
  ::: {#fig-quarto-blog layout-ncol="1"}
  ```{r}
  #| echo: false
  name_of_plot <- "img_06.png"
  rutita <- paste0("./imagenes/tt_01/", name_of_plot)
  knitr::include_graphics(rutita)
  ```
  `_site` es la carpeta que contiene el blog
  :::

## Alojando el blog

-   El blog que hemos creado no es muy interesante, pero vamos a ver lo fácil que es publicarlo en internet.

-   Hay muchas formas de alojar nuestro blog, por ejemplo [Github Pages](https://pages.github.com/) [Netlify](https://www.netlify.com/) etc... , pero usaremos el usando el servicio [Quartopub](https://quartopub.com/)

-   Para publicar nuestro baby-blog en Quartopub sólo hay que teclear lo siguiente en la Terminal de RStudio (panel inferior-izquierda)  



```{bash, eval = FALSE}
#- desde la Terminal
quarto publish quarto-pub
```


- Tras ejecutar lo anterior, se te pedrirá que autorices en la Terminal. Después se abrirá el navegador, tendrás que logearte en `Quarto Pub` y volverás a autorizar. Además te preguntarán el nombre del blog.

- Si te fijas, tras haberse publicado el blog en "Quarto Pub", se habrá creado un nuevo fichero en nuestro Rproject: es el fichero `_publish.yml`. En él solamente están los metadatos necesarios para publicar y actualizar nuestro blog.


  ::: {#fig-quarto-blog layout-ncol="1"}
  ```{r}
  #| echo: false
  name_of_plot <- "img_07.png"
  rutita <- paste0("./imagenes/tt_01/", name_of_plot)
  knitr::include_graphics(rutita)
  ```
  Fichero `_publish.yml` con la información para publicar el blog en `Quarto Pub`.
  :::

<br><br>

## Referencias

(Algunos artículos sobre creación de blogs en Quarto)

- [ Eric Ekholm. 2022. Modifying the Default Quarto Blog Structure](https://www.ericekholm.com/posts/demo-quarto-site/)  es una web con blog . GOOOOD

- [Bea Milz. 2022. Creating a Blog with Quarto in 10 Steps](https://beamilz.com/posts/2022-06-05-creating-a-blog-with-quarto/en/)

- [Navarro, Danielle. 2022. “Notes from a Data Witch - Porting a Distill Blog to Quarto](https://blog.djnavarro.net/posts/2022-04-20_porting-to-quarto/)

- [Quarto - Creating a Blog](https://quarto.org/docs/websites/website-blog.html)

- [Alison Hill. 2022. We Don’t Talk about Quarto](https://www.apreshill.com/blog/2022-04-we-dont-talk-about-quarto/)